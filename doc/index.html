<!DOCTYPE html>
<html>

<head>
<meta content="ja" http-equiv="Content-Language" />
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>PeerCastStation</title>
<link href="main.css" rel="stylesheet" type="text/css">
<style type="text/css">
</style>
</head>

<body>

<h1>PeerCastStation</h1>
<p>PeerCastStationはリメイク版PeerCastです。PeerCast.exeのかわりとして使えます。</p>
<section>
<h2>動作環境</h2>
<p>Windows XP SP3以降 + .NET Framework 3.5</p>
<p>Windows以外ではmono 2.6.7以降。今のところGUI必須</p>
</section>
<h2>インストール方法</h2>
<p>インストーラなどは無いので適当な場所にzipを展開してPeerCastStation.GUI.exeを起動してください。起動時にエラーが起きた場合は.NET Framework 
3.5以降が入ってない可能性が高いです。<a href="http://www.microsoft.com/downloads/ja-jp/details.aspx?FamilyID=AB99342F-5D1A-413D-8319-81DA479AB0D7">先にダウンロードしてインストールしてください。</a></p>
<p>Windows以外の場合はmonoをインストールしてください。Linuxなんかだとパッケージマネージャから入れれば大丈夫なはず。Macなどでは<a href="http://www.go-mono.com/mono-downloads/download.html">mono-projectからダウンロードして</a>インストールします(2.6.7以降ならどれでも)。Macの場合はX11も必要なので入れておいてください。あとはPeerCastStationのzipを適当な場所に展開して、ターミナルから</p>
<pre><code>mono PeerCastStation.GUI.exe</code></pre>
<p>で実行してください。</p>
<section>
</section>
<section>
<h2>使い方</h2>
<p>起動すると次のような画面になります。</p>
<p><img alt="起動イメージ" src="images/img5.png" /></p>
</section>
<section>
<h2>設定</h2>
<p>まずは設定タブをクリックしましょう。</p>
<p><img alt="設定" src="images/img6.png" /></p>
<p>
ポート番号や上り帯域を設定して適用ボタンを押します。設定したポートが既に使われている場合は下のステータスバーに「ポートが開けません」といったメッセージが出ます。その場合はポートを変更するか、同じポートを使っているアプリを終了して再度適用ボタンを押してください。</p>
<p>
「開放状態不明」になっている場合はまだどこにも接続していないのでポートが開いているかどうかわからない状態です。どこかの配信を見るか配信を始めるとポートが開いているかのチェックが行なわれるので、それまでは気にしなくてかまいません。</p>
<p>今のところ設定できるのは全体での最大リレー数や最大視聴数だけです。チャンネル毎の設定はまだできません。</p>
<p>配信する際にはYP一覧でYPを登録しておきます。配信しない場合でもYP登録を行なっておくといいことがあるかもしれません。</p>
<p><img alt="YP編集" src="images/img7.png" /></p>
<p>まず追加ボタンを押します。</p>
<p><img alt="YP編集" src="images/img8.png" /></p>
<p>
新しいYP設定が追加されるので編集します。YP名は表示用なのでお好きなように。プロトコルは今のところPCP一択です。アドレスにはYPのアドレスおよびポート番号を指定します。ポート番号は省略したら7144です(PCPの場合)。</p>
<p>設定したYPを一時的に使わないようにしたい場合は「このYPを使用する」のチェックを外します。「↑」「↓」ボタンでリストの並びを変更できます。</p>
<p>OKボタンを押すと設定が保存されます。</p>
</section>
<section>
<h2>配信を見る</h2>
<p>見る方法は普通のPeerCastと同じです。YPのページからPlayリンクで再生するか、各種YPブラウザで見てください。</p>
<p><img alt="配信を見る" src="images/imgD.png" /></p>
<p>
チャンネル一覧にチャンネルが出ます。再生は一旦ブラウザ経由でプレイリストを開きます。切断はチャンネルの接続を切ります。再接続をするとリレーをつなぎなおします。</p>
<p>チャンネル一覧にはチャンネル名、ビットレート、全体(自分以下の)の視聴数/リレー数、自分の視聴数/リレー数、チャンネル状態、が表示されます。全体の視聴・リレー数は怪しい場合があります。</p>
<p>
ポート開放が上手くいっていれば下のポートが開放になるはずです。なっていない場合はファイアウォールでブロックされているかルータの設定などが上手くいってないようなので、設定を確認してください。</p>
<p>接続一覧には自分に直接つながってる接続が表示されます。プレイヤーがつながっている場合はHTTP Direct、リレー接続の場合はPCP 
Relayが表示されます。</p>
<p>PCP 
Relayの場合には最後に「0」「-」「B」が表示されることがあります。「0」はポートが開放できてない(いわゆるポト0)、「-」はこれ以上リレーできない(いわゆる紫または青)、「B」はリレー受信できていないことを表します。</p>
<p>強制的に下流を切断したい場合は、切りたい接続を選んで下流切断を押してください。</p>
<p>チャンネル情報のタブでチャンネル情報の確認と、自分が配信している場合はチャンネル情報の編集が行えます。</p>
<p><img alt="チャンネル情報" src="images/imgE.png" /></p>
<p>視聴している場合は見るだけですが、配信している場合は編集できるようになっています。編集したら更新ボタンを押してください。</p>
</section>
<section>
<h2>配信</h2>
<p><img alt="配信" src="images/img15.png"></p>
<p>配信タブから配信することができます。</p>
<p>ストリームURLにはWMEなんかのアドレスとポートをURL形式で指定します。間違うと落ちます。</p>
<p>チャンネル名にはチャンネル名を指定します。</p>
<p>タイプには配信するフォーマットを指定します。WMVの場合はASFでかまいません。今のところASFかRAWしかないです。</p>
<p>YPにはチャンネル情報を載せるYPを指定してください。一覧は設定タブで編集できます。全くYPを設定していない場合はどのYPにも載りません。</p>
<p>
配信開始ボタンを押すと配信が開始されチャンネル一覧に出ます。RECEIVEにならなかったらストリームURLが間違ってたりします。一旦切ってもう一度試してください。ストリームURLがURL的に間違ってると落ちます。気をつけましょう。あきらかにバグなのでそのうち直します。</p>
<h2>終了など</h2>
<p>Windowsではウィンドウを閉じても終了しません。タスクトレイに入っています。</p>
<p><img alt="タスクトレイアイコン" src="images/imgF.png" /></p>
<p>ダブルクリックするか、右クリックで「GUIを表示」を選ぶとウィンドウがまた表示されます。終了を選ぶと本当に終了します。</p>
<p>Windows以外ではタスクトレイアイコンが上手く動かなかったのでウィンドウを閉じると終了するようになっています。</p>
<h2>その他</h2>
<p>ログには細かいログが出ます。普通は気にしないので詳しくは書きません。</p>
<p>ログタブにはバージョン情報があります。関連DLLのバージョンが知りたい時にはそこを見てください。</p>
</section>
<section>
<h2>制限事項</h2>
<ul>
	<li>
	配信はまだASF(WMVかWMA)しかできません。だいたい足りると思いますが、そのうち増やす予定です。視聴はPeerCastが対応しているものは対応しています。</li>
	<li>
	PeerCastにあったブラウザから操作できるインターフェースは今のところありません。そのせいもあってPeCaStarterなどのPeerCastを外部から操作するツールが使えません。</li>
	<li>PUSH配信をしたり視聴したりはできません。</li>
	<li>リレーの自動切断はありません。常にAutoKeep状態です。リレーが必要なくなった配信はGUIから切断してください。</li>
	<li>下流の自動切断はありません。ポト0だろうが帯域が足りてなかろうが古いバージョンだろうが普通につなぎっぱなしになります。</li>
	<li>IPv6対応はまだできてません。</li>
</ul>
</section>
<section>
<h2>Q&amp;A</h2>
<dl>
	<dt class="q">Q: これはつまりPeerCast改造版ですか？</dt>
	<dd class="a">
	<p>A: 
	似てるけど違います。PeerCastのソースを参考にC#で一から書き直したPeerCastです。しかし、結局やれることは同じなので改造版みたいなものだと思ってかまいません。機能低下してるけどな。</p>
	</dd>
	<dt class="q">Q: Macで動かすとウィンドウの表示が乱れます。コピペもできません。</dt>
	<dd class="a">
	<p>A: monoのせいなので仕方ありません。GUIについては今後別な方法で実装する予定です。</p>
	</dd>
</dl>
</section>
<section>
	<h2>更新履歴</h2>
	<dl>
		<dt>0.6.1</dt>
		<dd><p>HTTP出力でメモリリークしていたのを修正した。YP接続部分のログを出力するようにした。</p></dd>

		<dt>0.6.0</dt>
		<dd><p>初期バージョン</p></dd>
	</dl>
</section>
<section>
	<h2>ソース</h2>
<p><a href="https://github.com/kumaryu/peercaststation">githubにてソース公開しています。</a>ライセンスはGPLv3です。</p>
</section>
</body>

</html>
